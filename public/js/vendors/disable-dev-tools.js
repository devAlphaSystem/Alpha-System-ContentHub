/**
 * Disable Dev Tools v1.0-0
 *
 * @author
 * Anderson Polo @ Alpha System Development Team
 *
 * @contact
 * suporte@alphasystem.dev
 *
 * @license
 * MIT License - You are free to use, modify, and distribute this software
 * as long as the original copyright and license notice are included.
 *
 * @documentation
 * https://docs.alphasystem.dev/view/2z36q7kf5fyak02
 */
((window,document)=>{const DisableDevTools={_preventContextMenu:!0,_preventKeys:!0,_detectDevTools:!0,_enabled:!1,_modalShadowRoot:null,_backdropElement:null,_boundHandleContextMenu:null,_boundHandleKeyDown:null,_devToolsDetectionInterval:null,_detectionThreshold:150,_detectionInterval:1e3,_modalMessage:"Developer tools detected! Please close them to continue.",_onDetected:null,_onClosed:null,_useBackdrop:!0,_modalStyles:{},init(options={}){this._preventContextMenu=!1!==options.preventContextMenu,this._preventKeys=!1!==options.preventKeys,this._detectDevTools=!1!==options.detectDevTools,this._detectionThreshold=options.detectionThreshold||150,this._detectionInterval=options.detectionInterval||1e3,this._modalMessage="string"==typeof options.modalMessage?options.modalMessage:this._modalMessage,this._onDetected="function"==typeof options.onDetected?options.onDetected:null,this._onClosed="function"==typeof options.onClosed?options.onClosed:null,this._useBackdrop=!1!==options.useBackdrop,this._modalStyles="object"==typeof options.modalStyles?options.modalStyles:{},this._enabled||(this._boundHandleContextMenu=this._handleContextMenu.bind(this),this._boundHandleKeyDown=this._handleKeyDown.bind(this),this._addEventListeners(),this._enabled=!0)},disable(){this._preventContextMenu&&document.removeEventListener("contextmenu",this._boundHandleContextMenu,!1),this._preventKeys&&document.removeEventListener("keydown",this._boundHandleKeyDown,!1),this._devToolsDetectionInterval&&(clearInterval(this._devToolsDetectionInterval),this._devToolsDetectionInterval=null),this._removeModal(),this._removeBackdrop(),this._enabled=!1},_addEventListeners(){this._preventContextMenu&&document.addEventListener("contextmenu",this._boundHandleContextMenu,!1),this._preventKeys&&document.addEventListener("keydown",this._boundHandleKeyDown,!1),this._detectDevTools&&this._detectDevToolsOpen()},_handleContextMenu(e){e.preventDefault()},_handleKeyDown(e){const key=e.key.toUpperCase();("F12"===key||(e.ctrlKey||e.metaKey)&&e.shiftKey&&["I","J","C"].includes(key)||e.metaKey&&e.altKey&&"I"===key)&&e.preventDefault()},_detectDevToolsOpen(){let devToolsOpen=!1;const threshold=this._detectionThreshold,checkInterval=this._detectionInterval;this._devToolsDetectionInterval=setInterval((()=>{const start=performance.now();for(let i=0;i<5e5;i++);const duration=performance.now()-start,widthDifference=window.outerWidth-window.innerWidth,heightDifference=window.outerHeight-window.innerHeight;(duration>threshold||widthDifference>160||heightDifference>160||this._isDebuggerOpen())&&!devToolsOpen?(devToolsOpen=!0,this._onDevToolsDetected()):duration<=threshold&&widthDifference<=160&&heightDifference<=160&&!this._isDebuggerOpen()&&devToolsOpen&&(devToolsOpen=!1,this._onDevToolsClosed())}),checkInterval)},_isDebuggerOpen(){const start=performance.now();return performance.now()-start>100},_onDevToolsDetected(){"function"==typeof this._onDetected&&this._onDetected(),this._useBackdrop&&this._createBackdrop(),this._createModal(),this._trapFocus()},_onDevToolsClosed(){"function"==typeof this._onClosed&&this._onClosed(),this._removeModal(),this._removeBackdrop(),this._releaseFocus()},_createBackdrop(){if(this._backdropElement)return;const backdrop=document.createElement("div");backdrop.id="ddt-backdrop",backdrop.style.position="fixed",backdrop.style.top="0",backdrop.style.left="0",backdrop.style.width="100%",backdrop.style.height="100%",backdrop.style.background="rgba(0, 0, 0, 0.5)",backdrop.style.backdropFilter="blur(5px)",backdrop.style.zIndex="9998",backdrop.style.pointerEvents="auto",backdrop.style.opacity="0",backdrop.style.transition="opacity 0.3s ease",document.body.appendChild(backdrop),requestAnimationFrame((()=>{backdrop.style.opacity="1"})),this._backdropElement=backdrop},_removeBackdrop(){this._backdropElement&&(this._backdropElement.style.opacity="0",setTimeout((()=>{this._backdropElement?.parentNode&&(this._backdropElement.parentNode.removeChild(this._backdropElement),this._backdropElement=null)}),300))},_createModal(){if(this._modalContainer)return;const container=document.createElement("div");container.id="ddt-modal-container",container.style.position="fixed",container.style.top="20px",container.style.right="20px",container.style.zIndex="9999",container.style.pointerEvents="none",container.style.opacity="0",container.style.transition="opacity 0.3s ease";const shadow=container.attachShadow({mode:"closed"}),modal=document.createElement("div");if(modal.style.minWidth="250px",modal.style.padding="15px 20px",modal.style.backgroundColor="#f44336",modal.style.color="#fff",modal.style.borderRadius="5px",modal.style.boxShadow="0 2px 10px rgba(0,0,0,0.3)",modal.style.fontFamily="Arial, sans-serif",modal.style.fontSize="14px",modal.style.pointerEvents="auto",modal.style.animation="fadeIn 0.3s ease",modal.textContent=this._modalMessage,modal.setAttribute("role","alert"),modal.setAttribute("aria-live","assertive"),modal.setAttribute("tabindex","-1"),Object.keys(this._modalStyles).length>0)for(const[prop,value]of Object.entries(this._modalStyles))modal.style[prop]=value;const style=document.createElement("style");style.textContent="\n        @keyframes fadeIn {\n          from { opacity: 0; transform: translateY(-10px); }\n          to { opacity: 1; transform: translateY(0); }\n        }\n        #ddt-modal-container:focus {\n          outline: none;\n        }\n      ",shadow.appendChild(style),shadow.appendChild(modal),document.body.appendChild(container),requestAnimationFrame((()=>{container.style.opacity="1"})),this._modalShadowRoot=shadow,this._modalContainer=container},_removeModal(){this._modalContainer&&(this._modalContainer.style.opacity="0",setTimeout((()=>{this._modalContainer?.parentNode&&(this._modalContainer.parentNode.removeChild(this._modalContainer),this._modalShadowRoot=null,this._modalContainer=null)}),300))},_trapFocus(){this._modalContainer&&(this._previouslyFocusedElement=document.activeElement,this._modalContainer.setAttribute("tabindex","-1"),this._modalContainer.focus(),this._boundHandleFocus=e=>{this._modalContainer.contains(e.target)||(e.stopPropagation(),this._modalContainer.focus())},document.addEventListener("focus",this._boundHandleFocus,!0))},_releaseFocus(){this._previouslyFocusedElement&&(this._previouslyFocusedElement.focus(),this._previouslyFocusedElement=null),this._boundHandleFocus&&(document.removeEventListener("focus",this._boundHandleFocus,!0),this._boundHandleFocus=null)}};window.DisableDevTools=DisableDevTools,DisableDevTools.init()})(window,document);