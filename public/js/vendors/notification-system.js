/**
 * Easy Notification System v1.0-0
 *
 * @author
 * Anderson Polo @ Alpha System Development Team
 *
 * @contact
 * suporte@alphasystem.dev
 *
 * @license
 * MIT License - You are free to use, modify, and distribute this software
 * as long as the original copyright and license notice are included.
 *
 * @documentation
 * https://docs.alphasystem.dev/view/89j78wmf0x5nz4s
 */
(()=>{const EasyNotificationSystem=(()=>{const globalConfig={enabled:!0,defaultDisplayTime:5e3,maxConcurrent:15,animationDuration:300,maxQueueSize:1e3,allowDuplicate:!1,defaultType:"info",defaultCategory:"general",segmentMatching:!0,priorityEnabled:!0,analyticsEnabled:!0,categoryFilteringEnabled:!0,userInteractionTracking:!0,maxRetriesOnDisplayError:3,containerId:null,animationType:"fade",customAnimations:{},customStyles:{},fallbackStrategy:"queue",timeIncrementOnRetry:1e3,categoryPriorities:{},userSegments:{},globalFilters:[],autoDismissOnClick:!0,autoDismissOnHoverOut:!1,hoverPause:!0,retryOnFailure:!0,position:"top-right",useNativeNotifications:!1,defaultSound:null,showTimerBar:!0};function deepClone(obj){if(!obj||"object"!=typeof obj)return obj;if(obj instanceof Date)return new Date(obj.getTime());if(Array.isArray(obj)){const arr=[];for(let i=0;i<obj.length;i++)arr[i]=deepClone(obj[i]);return arr}const cloned={};for(const k in obj)Object.prototype.hasOwnProperty.call(obj,k)&&(cloned[k]=deepClone(obj[k]));return cloned}function generateId(){const chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let id="";for(let i=0;i<16;i++)id+=chars.charAt(Math.floor(Math.random()*chars.length));return id}function mergeConfigs(base,custom){const result=deepClone(base);for(const k in custom)Object.prototype.hasOwnProperty.call(custom,k)&&("object"==typeof base[k]&&"object"==typeof custom[k]?result[k]={...base[k],...custom[k]}:result[k]=custom[k]);return result}const UserSegmentEngine=(()=>{const segments={};return{defineSegment:function defineSegment(name,criteriaFn){"function"==typeof criteriaFn&&(segments[name]=criteriaFn)},matches:function matches(userData,requiredSegments){if(!requiredSegments||0===requiredSegments.length)return!0;for(let i=0;i<requiredSegments.length;i++){const seg=requiredSegments[i],fn=segments[seg];if(!fn)return!1;if(!fn(userData))return!1}return!0}}})(),PriorityEngine=(()=>{const categoryPrios={};function getPriorityForCategory(cat){return categoryPrios[cat]||0}return{setCategoryPriority:function setCategoryPriority(cat,val){categoryPrios[cat]=val},compare:function compare(a,b){let pa=a.priority||0,pb=b.priority||0;return a.category&&(pa+=getPriorityForCategory(a.category)),b.category&&(pb+=getPriorityForCategory(b.category)),pb-pa}}})(),CategoryEngine=(()=>{const allowedCategories=new Set,blockedCategories=new Set;return{allowCategory:function allowCategory(cat){allowedCategories.add(cat),blockedCategories.delete(cat)},blockCategory:function blockCategory(cat){blockedCategories.add(cat),allowedCategories.delete(cat)},isAllowed:function isAllowed(cat){return!blockedCategories.has(cat)&&(0===allowedCategories.size||allowedCategories.has(cat))}}})(),NotificationAnalytics=(()=>{let logs=[];return{logEvent:function logEvent(type,data){logs.push({type:type,data:data,timestamp:Date.now()})},getLogs:function getLogs(){return logs.slice()},clearLogs:function clearLogs(){logs=[]}}})(),NotificationRenderer=(()=>{const containers={};let activeNotifications={};const defaultStyles={position:"fixed",zIndex:9999,maxWidth:"300px",fontFamily:"Arial, sans-serif",boxSizing:"border-box"},positionStyles={"top-right":{top:"20px",right:"20px"},"top-left":{top:"20px",left:"20px"},"bottom-right":{bottom:"20px",right:"20px"},"bottom-left":{bottom:"20px",left:"20px"}},typeColors={info:{background:"#d9edf7",color:"#31708f"},warning:{background:"#fcf8e3",color:"#8a6d3b"},danger:{background:"#f2dede",color:"#a94442"},success:{background:"#dff0d8",color:"#3c763d"}},animations={fade:{showAnimation:"fadeIn 0.3s forwards",hideAnimation:"fadeOut 0.3s forwards",timerAnimation:"timerFade"},slide:{showAnimation:"slideIn 0.3s forwards",hideAnimation:"slideOut 0.3s forwards",timerAnimation:"timerSlide"},scale:{showAnimation:"scaleIn 0.3s forwards",hideAnimation:"scaleOut 0.3s forwards",timerAnimation:"timerFade"},flip:{showAnimation:"flipIn 0.3s forwards",hideAnimation:"flipOut 0.3s forwards",timerAnimation:"timerFade"}},pendingNativeNotifications=[];function applyStyles(el,styles){for(const k in styles)Object.prototype.hasOwnProperty.call(styles,k)&&(el.style[k]=styles[k])}function createElement(tag,attrs,styles,text){const el=document.createElement(tag);if(attrs)if("string"==typeof attrs)el.className=attrs;else for(const a in attrs)Object.prototype.hasOwnProperty.call(attrs,a)&&el.setAttribute(a,attrs[a]);return styles&&applyStyles(el,styles),text&&(el.innerText=text),el}function playSound(soundUrl){if(!soundUrl)return;const audio=new Audio(soundUrl);audio.volume=.85,audio.play().catch((e=>{console.error("Failed to play sound:",e)}))}function showNativeNotification(n,cfg){if(console.log("Attempting to show native notification:",n),"undefined"==typeof Notification)return console.error("This browser does not support desktop notification"),void showNotification(n,cfg);if("granted"===Notification.permission){console.log("Permission already granted. Showing notification.");const options={body:n.message||"",icon:n.icon||null},notification=new Notification(n.title||"",options);(n.sound||cfg.defaultSound)&&playSound(n.sound||cfg.defaultSound),notification.onclick=event=>{event.preventDefault(),window.focus(),n.onClick&&"function"==typeof n.onClick&&n.onClick(n),cfg.autoDismissOnClick&&!n.persistent&&hideNotification(n.id,cfg,!0,"user")},notification.onclose=()=>{cfg.analyticsEnabled&&NotificationAnalytics.logEvent("hide",{id:n.id,user:!1}),NotificationStorage.decrementActive();const notificationObj=NotificationStorage.get(n.id);if(NotificationStorage.remove(n.id),NotificationInteractionHandler.trigger("finished",{id:n.id,reason:"timer"}),notificationObj&&"function"==typeof notificationObj.onFinished)try{notificationObj.onFinished({id:n.id,reason:"timer"})}catch(error){console.error(`Error in onFinished callback for notification ${n.id}:`,error)}}}else"denied"!==Notification.permission?(console.log("Requesting notification permission..."),pendingNativeNotifications.push(n),Notification.requestPermission().then((permission=>{"granted"===permission?(console.log("Notification permission granted. Showing queued notifications."),pendingNativeNotifications.forEach((notification=>{showNativeNotification(notification,cfg)})),pendingNativeNotifications.length=0):console.warn("Notification permission denied.")})).catch((error=>{console.error("Notification permission request failed:",error)}))):console.warn("Notification permission denied previously.")}function showNotification(n,cfg){if(!cfg.enabled)return;if(cfg.useNativeNotifications||n.nativeNotification)return showNativeNotification(n,cfg),void(cfg.analyticsEnabled&&NotificationAnalytics.logEvent("show",{id:n.id,category:n.category,type:n.type,native:!0}));const position=n.position||cfg.position,container=function createContainer(cfg){const pos=cfg.position||"top-right";if(containers[pos])return containers[pos];const container=document.createElement("div");return container.setAttribute("id",cfg.containerId||`easy-notification-container-${pos}`),applyStyles(container,defaultStyles),applyStyles(container,positionStyles[pos]||positionStyles["top-right"]),cfg.customStyles&&"object"==typeof cfg.customStyles&&applyStyles(container,cfg.customStyles),document.body.appendChild(container),containers[pos]=container,container}({...cfg,position:position});if(activeNotifications[n.id])return;const tc=typeColors[n.type]||typeColors.info,wrapper=createElement("div",{"data-notification-id":n.id,role:"alert","aria-live":"assertive",tabindex:"0"},{background:tc.background,color:tc.color,marginBottom:"10px",padding:"15px",borderRadius:"5px",boxShadow:"0 2px 5px rgba(0,0,0,0.3)",cursor:"default",display:"flex",alignItems:"flex-start",position:"relative",overflow:"hidden"});!function applyAnimationStyles(el,anim,show){const a=animations[anim]||animations.fade;el.style.animation=show?a.showAnimation:a.hideAnimation}(wrapper,n.animationType||cfg.animationType,!0);const closeButton=createElement("div",null,{position:"absolute",top:"5px",right:"8px",cursor:"pointer",fontWeight:"bold"},"Ã—");closeButton.addEventListener("click",(()=>{hideNotification(n.id,cfg,!0,"user")}));const contentWrapper=createElement("div",null,{flex:"1"}),titleEl=createElement("div",null,{fontWeight:"bold",marginBottom:"5px"},n.title||""),messageEl=createElement("div",{class:"message"},{},n.message||"");if(n._messageElement=messageEl,contentWrapper.appendChild(titleEl),contentWrapper.appendChild(messageEl),wrapper.appendChild(closeButton),wrapper.appendChild(contentWrapper),n.showTimerBar&&n.displayTime>0){const timerBar=createElement("div",null,{position:"absolute",bottom:"0",left:"0",height:"4px",background:tc.color,width:"100%",animation:`${animations[n.animationType||cfg.animationType].timerAnimation} ${n.displayTime}ms linear forwards`});wrapper.appendChild(timerBar)}if(n.hasProgressBar){const progressBar=createElement("div",null,{position:"absolute",bottom:"4px",left:"0",height:"4px",background:"#4caf50",width:`${n.progress}%`,transition:"width 0.3s ease"});wrapper.appendChild(progressBar),n.progressBarElement=progressBar}cfg.customStyles&&"object"==typeof cfg.customStyles&&applyStyles(wrapper,cfg.customStyles),container.appendChild(wrapper),activeNotifications[n.id]=wrapper,NotificationStorage.incrementActive(),(n.sound||cfg.defaultSound)&&playSound(n.sound||cfg.defaultSound);const displayTime=n.displayTime,useHoverPause=cfg.hoverPause&&!n.autoDismissOnHoverOut&&displayTime>0,useAutoDismissOnHoverOut=n.autoDismissOnHoverOut&&!n.persistent;displayTime>0&&(wrapper.startTime=Date.now(),wrapper.remainingDisplayTime=displayTime,wrapper.displayTimeoutId=setTimeout((()=>{hideNotification(n.id,cfg,!1,"timer")}),displayTime)),useHoverPause&&(wrapper.addEventListener("mouseenter",(()=>{if(wrapper.displayTimeoutId){clearTimeout(wrapper.displayTimeoutId);const elapsed=Date.now()-wrapper.startTime;wrapper.remainingDisplayTime=Math.max(0,wrapper.remainingDisplayTime-elapsed);const timerBar=wrapper.querySelector('div[style*="position: absolute"][style*="height: 4px"]');timerBar&&(timerBar.style.animationPlayState="paused")}})),wrapper.addEventListener("mouseleave",(()=>{if(wrapper.remainingDisplayTime>0){wrapper.startTime=Date.now(),wrapper.displayTimeoutId=setTimeout((()=>{hideNotification(n.id,cfg,!1,"timer")}),wrapper.remainingDisplayTime);const timerBar=wrapper.querySelector('div[style*="position: absolute"][style*="height: 4px"]');timerBar&&(timerBar.style.animationPlayState="running")}}))),useAutoDismissOnHoverOut&&wrapper.addEventListener("mouseleave",(()=>{hideNotification(n.id,cfg,!1,"timer")})),cfg.analyticsEnabled&&NotificationAnalytics.logEvent("show",{id:n.id,category:n.category,type:n.type,native:!1}),wrapper.addEventListener("click",(e=>{cfg.userInteractionTracking&&e.target!==closeButton&&NotificationAnalytics.logEvent("click",{id:n.id}),cfg.autoDismissOnClick&&e.target!==closeButton&&!n.persistent&&hideNotification(n.id,cfg,!0,"user"),n.onClick&&"function"==typeof n.onClick&&e.target!==closeButton&&n.onClick(n)}))}function hideNotification(id,cfg,userTriggered,reason="timer"){if(!cfg.enabled)return;const el=activeNotifications[id];el&&(!function hideAnimationStyles(el,anim){const a=animations[anim]||animations.fade;el.style.animation=a.hideAnimation}(el,cfg.animationType),setTimeout((()=>{el?.parentNode&&el.parentNode.removeChild(el),delete activeNotifications[id],NotificationStorage.decrementActive();const notification=NotificationStorage.get(id);if(NotificationStorage.remove(id),NotificationInteractionHandler.trigger("finished",{id:id,reason:userTriggered?"user":reason}),notification&&"function"==typeof notification.onFinished)try{notification.onFinished({id:id,reason:userTriggered?"user":reason})}catch(error){console.error(`Error in onFinished callback for notification ${id}:`,error)}notification&&"timer"===reason&&!notification.persistent&&notification.redirect&&(window.location.href=notification.redirect)}),cfg.animationDuration),cfg.analyticsEnabled&&NotificationAnalytics.logEvent("hide",{id:id,user:!!userTriggered}))}return{showNotification:showNotification,hideNotification:hideNotification,injectKeyframes:function injectKeyframes(cfg){const style=document.createElement("style");style.type="text/css";let keyframes="\n          @keyframes fadeIn {\n            from { opacity: 0; }\n            to { opacity: 1; }\n          }\n          @keyframes fadeOut {\n            from { opacity: 1; }\n            to { opacity: 0; }\n          }\n          @keyframes slideIn {\n            from { transform: translateY(-10px); opacity: 0; }\n            to { transform: translateY(0); opacity: 1; }\n          }\n          @keyframes slideOut {\n            from { transform: translateY(0); opacity: 1; }\n            to { transform: translateY(-10px); opacity: 0; }\n          }\n          @keyframes scaleIn {\n            from { transform: scale(0.9); opacity: 0; }\n            to { transform: scale(1); opacity: 1; }\n          }\n          @keyframes scaleOut {\n            from { transform: scale(1); opacity: 1; }\n            to { transform: scale(0.9); opacity: 0; }\n          }\n          @keyframes flipIn {\n            from { transform: rotateX(-90deg); opacity: 0; }\n            to { transform: rotateX(0); opacity: 1; }\n          }\n          @keyframes flipOut {\n            from { transform: rotateX(0); opacity: 1; }\n            to { transform: rotateX(-90deg); opacity: 0; }\n          }\n          @keyframes timerFade {\n            from { width: 100%; }\n            to { width: 0%; }\n          }\n          @keyframes timerSlide {\n            from { width: 100%; }\n            to { width: 0%; }\n          }\n        ";if(cfg.customAnimations&&"object"==typeof cfg.customAnimations)for(const animName in cfg.customAnimations)Object.prototype.hasOwnProperty.call(cfg.customAnimations,animName)&&(keyframes+=cfg.customAnimations[animName]);style.innerHTML=keyframes,document.head.appendChild(style)},updateMessage:function updateMessage(id,newMessage){const el=activeNotifications[id];if(!el)return;const messageEl=el.querySelector(".message");messageEl&&(messageEl.innerText=newMessage)},showNativeNotification:showNativeNotification,clearAllNotifications:function clearAllNotifications(){for(const id in activeNotifications){const el=activeNotifications[id];el?.parentNode&&el.parentNode.removeChild(el),NotificationStorage.decrementActive();const notification=NotificationStorage.get(id);if(notification&&"function"==typeof notification.onFinished)try{notification.onFinished({id:id,reason:"clearAll"})}catch(error){console.error(`Error in onFinished callback for notification ${id}:`,error)}NotificationInteractionHandler.trigger("finished",{id:id,reason:"clearAll"}),NotificationStorage.remove(id)}activeNotifications={},NotificationStorage.clearQueue()}}})(),TimeUtils={now:function now(){return Date.now()}},NotificationStorage=(()=>{const allNotifications={},pendingQueue=[];let activeCount=0;const STORAGE_KEY="EasyNotificationSystem";function add(n){allNotifications[n.id]=n,n.persistent&&function saveToLocalStorage(notification){let persisted=JSON.parse(localStorage.getItem(STORAGE_KEY))||[];persisted=persisted.filter((n=>n.id!==notification.id)),persisted.push(notification),localStorage.setItem(STORAGE_KEY,JSON.stringify(persisted))}(n)}function addToQueue(n){pendingQueue.length>=globalConfig.maxQueueSize?console.warn("Notification queue has reached its maximum size."):pendingQueue.push(n)}return{add:add,get:function get(id){return allNotifications[id]},remove:function remove(id){delete allNotifications[id],function removeFromLocalStorage(id){let persisted=JSON.parse(localStorage.getItem(STORAGE_KEY))||[];persisted=persisted.filter((n=>n.id!==id)),localStorage.setItem(STORAGE_KEY,JSON.stringify(persisted))}(id)},addToQueue:addToQueue,getNext:function getNext(cfg){return 0===pendingQueue.length?null:(cfg.priorityEnabled&&pendingQueue.sort(PriorityEngine.compare),pendingQueue.shift())},incrementActive:function incrementActive(){activeCount++},decrementActive:function decrementActive(){activeCount>0&&activeCount--},canDisplayMore:function canDisplayMore(cfg){return activeCount<cfg.maxConcurrent},getAllNotifications:function getAllNotifications(){return allNotifications},loadFromLocalStorage:function loadFromLocalStorage(){(JSON.parse(localStorage.getItem(STORAGE_KEY))||[]).forEach((n=>{add(n),addToQueue(n)}))},clearQueue:function clearQueue(){pendingQueue.length=0}}})(),NotificationScheduler=(()=>{const scheduled=[];return{schedule:function schedule(n,time){const sId=generateId();return scheduled.push({id:sId,notification:n,time:time}),sId},checkSchedules:function checkSchedules(cfg,displayFn){if(!cfg.enabled)return;const nowTime=TimeUtils.now(),toDisplay=[];for(let i=0;i<scheduled.length;i++)scheduled[i].time<=nowTime&&toDisplay.push(scheduled[i]);for(let j=0;j<toDisplay.length;j++){displayFn(toDisplay[j].notification,cfg);const idx=scheduled.findIndex((x=>x.id===toDisplay[j].id));idx>=0&&scheduled.splice(idx,1)}},removeSchedule:function removeSchedule(sId){const idx=scheduled.findIndex((x=>x.id===sId));idx>=0&&scheduled.splice(idx,1)}}})(),NotificationInteractionHandler=(()=>{let userData={};const eventListeners={};return{setUserData:function setUserData(data){userData=data},getUserData:function getUserData(){return userData},on:function on(event,fn){eventListeners[event]||(eventListeners[event]=[]),eventListeners[event].push(fn)},trigger:function trigger(event,data){if(eventListeners[event])for(let i=0;i<eventListeners[event].length;i++)eventListeners[event][i](data)}}})();function displayNotificationsLoop(cfg){if(cfg.enabled){for(NotificationScheduler.checkSchedules(cfg,enqueueNotification);NotificationStorage.canDisplayMore(cfg);){const next=NotificationStorage.getNext(cfg);if(!next)break;shouldDisplay(next,cfg)&&showNow(next,cfg)}requestAnimationFrame((()=>{displayNotificationsLoop(cfg)}))}}function shouldDisplay(notification,cfg){return!!cfg.enabled&&(!(cfg.categoryFilteringEnabled&&!CategoryEngine.isAllowed(notification.category))&&!(cfg.segmentMatching&&!UserSegmentEngine.matches(NotificationInteractionHandler.getUserData(),notification.segments)))}function showNow(notification,cfg){cfg.enabled&&(NotificationStorage.incrementActive(),NotificationRenderer.showNotification(notification,cfg),cfg.analyticsEnabled&&NotificationAnalytics.logEvent("displayed",{id:notification.id}))}function enqueueNotification(n,cfg){cfg.enabled&&(!cfg.allowDuplicate&&function isDuplicate(n){const all=NotificationStorage.getAllNotifications();for(const id in all){const existing=NotificationStorage.get(id);if(existing.title===n.title&&existing.message===n.message&&existing.type===n.type)return!0}return!1}(n)||(n.id=n.id||generateId(),NotificationStorage.add(n),NotificationStorage.addToQueue(n)))}function EasyNotification(options){this.cfg=mergeConfigs(globalConfig,options||{}),NotificationRenderer.injectKeyframes(this.cfg),NotificationStorage.loadFromLocalStorage(),this.cfg.useNativeNotifications&&this.requestPermission(),"undefined"!=typeof window&&(window.EasyNotificationInstance=this)}return EasyNotification.prototype={createNotification:function(params){if(!this.cfg.enabled)return null;const cfg=this.cfg,persistent=!0===params.persistent,position=params.position||cfg.position,autoDismissOnHoverOut=void 0!==params.autoDismissOnHoverOut?params.autoDismissOnHoverOut:cfg.autoDismissOnHoverOut,sound=params.sound||cfg.defaultSound,notif={title:params.title||"",message:params.message||"",type:params.type||cfg.defaultType,category:params.category||cfg.defaultCategory,priority:"number"==typeof params.priority?params.priority:0,displayTime:"number"==typeof params.displayTime?params.displayTime:cfg.defaultDisplayTime,segments:Array.isArray(params.segments)?params.segments:[],onClick:"function"==typeof params.onClick?params.onClick:null,onFinished:"function"==typeof params.onFinished?params.onFinished:null,nativeNotification:!0===params.nativeNotification,persistent:persistent,hasProgressBar:!0===params.hasProgressBar,progress:"number"==typeof params.progress?params.progress:0,animationType:params.animationType||cfg.animationType,position:position,autoDismissOnHoverOut:autoDismissOnHoverOut,sound:sound,showTimerBar:void 0!==params.showTimerBar?params.showTimerBar:cfg.showTimerBar,redirect:params.redirect||null};return enqueueNotification(notif,cfg),notif.id},scheduleNotification:function(params){if(!this.cfg.enabled)return;const cfg=this.cfg,persistent=!0===params.persistent,position=params.position||cfg.position,autoDismissOnHoverOut=void 0!==params.autoDismissOnHoverOut?params.autoDismissOnHoverOut:cfg.autoDismissOnHoverOut,sound=params.sound||cfg.defaultSound,notif={title:params.title||"",message:params.message||"",type:params.type||cfg.defaultType,category:params.category||cfg.defaultCategory,priority:"number"==typeof params.priority?params.priority:0,displayTime:"number"==typeof params.displayTime?params.displayTime:cfg.defaultDisplayTime,segments:Array.isArray(params.segments)?params.segments:[],onClick:"function"==typeof params.onClick?params.onClick:null,onFinished:"function"==typeof params.onFinished?params.onFinished:null,nativeNotification:!0===params.nativeNotification,persistent:persistent,hasProgressBar:!0===params.hasProgressBar,progress:"number"==typeof params.progress?params.progress:0,animationType:params.animationType||cfg.animationType,position:position,autoDismissOnHoverOut:autoDismissOnHoverOut,sound:sound,showTimerBar:void 0!==params.showTimerBar?params.showTimerBar:cfg.showTimerBar,redirect:params.redirect||null};NotificationStorage.add(notif);const time=params.time||Date.now()+5e3;NotificationScheduler.schedule(notif,time)},setUserData:data=>{NotificationInteractionHandler.setUserData(data)},defineSegment:(name,fn)=>{UserSegmentEngine.defineSegment(name,fn)},allowCategory:cat=>{CategoryEngine.allowCategory(cat)},blockCategory:cat=>{CategoryEngine.blockCategory(cat)},setCategoryPriority:(cat,val)=>{PriorityEngine.setCategoryPriority(cat,val)},on:(event,fn)=>{NotificationInteractionHandler.on(event,fn)},triggerEvent:(event,data)=>{NotificationInteractionHandler.trigger(event,data)},getAnalytics:()=>NotificationAnalytics.getLogs(),clearAnalytics:()=>{NotificationAnalytics.clearLogs()},dismissNotification:function(id){const cfg=this.cfg;NotificationRenderer.hideNotification(id,cfg,!0,"manual")},increaseProgress:function(id,amount,newMessage){const notif=NotificationStorage.get(id);notif?.hasProgressBar&&(notif.progress=Math.min(100,notif.progress+amount),notif.progressBarElement&&(notif.progressBarElement.style.width=`${notif.progress}%`),NotificationAnalytics.logEvent("progress_increase",{id:id,amount:amount,newProgress:notif.progress}),"string"==typeof newMessage&&(notif.message=newMessage,NotificationRenderer.updateMessage(id,newMessage)),notif.progress>=100&&this.markAsFinished(id,"progress"))},decreaseProgress:(id,amount,newMessage)=>{const notif=NotificationStorage.get(id);notif?.hasProgressBar&&(notif.progress=Math.max(0,notif.progress-amount),notif.progressBarElement&&(notif.progressBarElement.style.width=`${notif.progress}%`),NotificationAnalytics.logEvent("progress_decrease",{id:id,amount:amount,newProgress:notif.progress}),"string"==typeof newMessage&&(notif.message=newMessage,NotificationRenderer.updateMessage(id,newMessage)))},setProgress:function(id,value,newMessage){const notif=NotificationStorage.get(id);notif?.hasProgressBar&&(notif.progress=Math.max(0,Math.min(100,value)),notif.progressBarElement&&(notif.progressBarElement.style.width=`${notif.progress}%`),NotificationAnalytics.logEvent("progress_set",{id:id,value:notif.progress}),"string"==typeof newMessage&&(notif.message=newMessage,NotificationRenderer.updateMessage(id,newMessage)),notif.progress>=100&&this.markAsFinished(id,"progress"))},playSound:async soundUrl=>{if(!soundUrl)return console.warn("No sound URL provided."),Promise.resolve();const audio=new Audio(soundUrl);audio.volume=.85;try{return await audio.play()}catch(error){console.error("Failed to play sound:",error)}},requestPermission:function(){"Notification"in window?Notification.requestPermission().then(function(permission){"granted"===permission?(console.log("Notification permission granted."),pendingNativeNotifications.forEach(function(notification){NotificationRenderer.showNativeNotification(notification,this.cfg)}.bind(this)),pendingNativeNotifications.length=0):"denied"===permission&&console.warn("Notification permission denied.")}.bind(this)).catch((error=>{console.error("Notification permission request failed:",error)})):console.error("This browser does not support desktop notification")},markAsFinished:function(id,reason="manual"){const cfg=this.cfg;NotificationRenderer.hideNotification(id,cfg,!0,reason)},clearAllNotifications:()=>{NotificationRenderer.clearAllNotifications()}},function initDisplayLoop(){"undefined"!=typeof window&&(window.EasyNotificationInstance||(window.EasyNotificationInstance=new EasyNotification)),displayNotificationsLoop(window.EasyNotificationInstance.cfg)}(),EasyNotification})();"undefined"!=typeof window&&(window.EasyNotificationSystem=EasyNotificationSystem),"undefined"!=typeof module&&module.exports&&(module.exports=EasyNotificationSystem)})();