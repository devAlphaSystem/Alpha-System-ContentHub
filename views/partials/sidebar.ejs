<aside class="sidebar">
  <div class="sidebar-inner collapsible-initializing">
    <div class="sidebar-header">
      <a href="/" class="sidebar-logo">
        <img id="sidebar-logo-img" src="<%= (locals.theme === 'dark' ? '/img/logo_white.png' : '/img/logo.png') %>" alt="Content Hub Logo">
      </a>
    </div>

    <nav class="sidebar-nav">
      <a href="/" class="nav-link <% if (currentPath === '/') { %>active<% } %>" data-nav-id="dashboard">
        <i class="fas fa-tachometer-alt fa-fw"></i>
        <span>Dashboard</span>
      </a>

      <a href="/projects" class="nav-link <% if (currentPath.startsWith('/projects') && !locals.currentProjectId) { %>active<% } %>" data-nav-id="projects">
        <i class="fas fa-folder fa-fw"></i>
        <span>Projects</span>
      </a>

      <a href="/files" class="nav-link <% if (currentPath === '/files') { %>active<% } %>" data-nav-id="files">
        <i class="fas fa-images fa-fw"></i>
        <span>Files</span>
      </a>

      <% if (locals.currentProjectId) { %>
        <span class="project-name">
          <%= locals.currentProjectName || 'Current Project' %>
        </span>

        <% const projectBasePath = `/projects/${locals.currentProjectId}` %>

        <a href="<%= projectBasePath %>" class="nav-link <% if (currentPath === projectBasePath) { %>active<% } %>" data-nav-id="project-overview">
          <i class="fas fa-chart-pie fa-fw"></i>
          <span>Project Overview</span>
        </a>
        <a href="/projects/<%= project.id %>/edit" class="nav-link <% if (currentPath.startsWith(projectBasePath + '/edit')) { %>active<% } %>" data-nav-id="project-settings">
          <i class="fas fa-cog fa-fw"></i>
          <span>Project Settings</span>
        </a>
        <a href="<%= projectBasePath %>/sidebar-order" class="nav-link <% if (currentPath.startsWith(projectBasePath + '/sidebar-order')) { %>active<% } %>" data-nav-id="project-sidebar-order">
          <i class="fas fa-sort-amount-down fa-fw"></i>
          <span>Sidebar Order</span>
        </a>
        <a href="<%= projectBasePath %>/templates" class="nav-link <% if (currentPath.startsWith(projectBasePath + '/templates')) { %>active<% } %>" data-nav-id="project-templates">
          <i class="fas fa-puzzle-piece fa-fw"></i>
          <span>Templates</span>
        </a>
      <% } %>
    </nav>

    <div class="sidebar-bottom-links">
      <a href="https://docs.alphasystem.dev/view/contenthubdcmnt" target="_blank" class="nav-link">
        <i class="fas fa-book fa-fw"></i>
        <span>Documentation</span>
      </a>

      <% if (locals.enableAuditLog) { %>
        <a href="/audit-log" class="nav-link <% if (currentPath === '/audit-log') { %>active<% } %>" data-nav-id="audit-log">
          <i class="fas fa-history fa-fw"></i>
          <span>Global Log</span>
        </a>
      <% } %>

      <a href="/settings" class="nav-link <% if (currentPath === '/settings') { %>active<% } %>" data-nav-id="settings">
        <i class="fas fa-cog fa-fw"></i>
        <span>Settings</span>
      </a>

      <a href="/logout" class="nav-link logout-link">
        <i class="fas fa-sign-out-alt fa-fw"></i>
        <span>Logout</span>
      </a>
    </div>

    <div class="sidebar-footer">
      <button id="theme-toggle" class="theme-toggle-btn" aria-label="Toggle theme">
        <span class="theme-icon-wrapper"><i class="fas fa-sun"></i></span>
        <span class="theme-icon-wrapper"><i class="fas fa-moon"></i></span>
      </button>
    </div>
  </div>
</aside>